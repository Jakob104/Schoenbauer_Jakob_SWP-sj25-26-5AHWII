datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
  output   = "client"
  runtime  = "deno"
}

model Airport {
  id        String @id @default(cuid())
  code      String @unique
  name      String
  city      String
  country   String
  timezone  String
  latitude  Float
  longitude Float

  // Relations
  departures Flight[] @relation("DepartureAirport")
  arrivals   Flight[] @relation("ArrivalAirport")

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("airports")
}

model Flight {
  id             String       @id @default(cuid())
  flightNumber   String
  departureTime  DateTime
  arrivalTime    DateTime
  duration       Int // in minutes
  price          Float
  availableSeats Int
  status         FlightStatus @default(SCHEDULED)

  // Relations
  departureAirportId String
  departureAirport   Airport @relation("DepartureAirport", fields: [departureAirportId], references: [id])

  arrivalAirportId String
  arrivalAirport   Airport @relation("ArrivalAirport", fields: [arrivalAirportId], references: [id])

  passengers Passenger[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("flights")
}

model Passenger {
  id             String   @id @default(cuid())
  firstName      String
  lastName       String
  email          String   @unique
  phone          String?
  dateOfBirth    DateTime
  passportNumber String?

  // Relations
  flights Flight[]

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("passengers")
}

enum FlightStatus {
  SCHEDULED
  BOARDING
  DEPARTED
  IN_AIR
  LANDED
  CANCELLED
  DELAYED
}
